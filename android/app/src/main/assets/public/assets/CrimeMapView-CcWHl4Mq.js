function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/web-Cft6Fykw.js","assets/index-BhaMQRom.js","assets/index-DPfTeBzk.css","assets/_commonjsHelpers-CqkleIqs.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{r as z,_ as A,C as v,d as E,a as p,o as S,n as N,b as H,m as w,c as y,e as B,f as O,g as s,w as l,u as d,I as T,h as C,t as M,i as R,j as b,k as x,F as V,l as W,p as F,q as U,s as G,v as $,x as k,y as j,z as Y}from"./index-BhaMQRom.js";const n=z("CapacitorGoogleMaps",{web:()=>A(()=>import("./web-Cft6Fykw.js"),__vite__mapDeps([0,1,2,3])).then(u=>new u.CapacitorGoogleMapsWeb)});n.addListener("isMapInFocus",u=>{var e;const t=u.x,i=u.y,r=document.elementFromPoint(t,i),h=((e=r==null?void 0:r.dataset)===null||e===void 0?void 0:e.internalId)===u.mapId;n.dispatchMapEvent({id:u.mapId,focus:h})});class q{constructor(e){this.southwest=e.southwest,this.center=e.center,this.northeast=e.northeast}async contains(e){return(await n.mapBoundsContains({bounds:this,point:e})).contains}async extend(e){const t=await n.mapBoundsExtend({bounds:this,point:e});return this.southwest=t.bounds.southwest,this.center=t.bounds.center,this.northeast=t.bounds.northeast,this}}var P;(function(u){u.Normal="Normal",u.Hybrid="Hybrid",u.Satellite="Satellite",u.Terrain="Terrain",u.None="None"})(P||(P={}));class K extends HTMLElement{constructor(){super()}connectedCallback(){if(this.innerHTML="",v.getPlatform()=="ios"){this.style.overflow="scroll",this.style["-webkit-overflow-scrolling"]="touch";const e=document.createElement("div");e.style.height="200%",this.appendChild(e)}}}customElements.define("capacitor-google-map",K);class _{constructor(e){this.element=null,this.resizeObserver=null,this.handleScrollEvent=()=>this.updateMapBounds(),this.id=e}static async create(e,t){const i=new _(e.id);if(!e.element)throw new Error("container element is required");e.config.androidLiteMode===void 0&&(e.config.androidLiteMode=!1),i.element=e.element,i.element.dataset.internalId=e.id;const r=await _.getElementBounds(e.element);if(e.config.width=r.width,e.config.height=r.height,e.config.x=r.x,e.config.y=r.y,e.config.devicePixelRatio=window.devicePixelRatio,v.getPlatform()=="android"&&i.initScrolling(),v.isNativePlatform()){e.element={};const c=()=>{var m,L;const g=(L=(m=i.element)===null||m===void 0?void 0:m.getBoundingClientRect())!==null&&L!==void 0?L:{};return{x:g.x,y:g.y,width:g.width,height:g.height}},h=()=>{n.onDisplay({id:i.id,mapBounds:c()})},f=()=>{n.onResize({id:i.id,mapBounds:c()})},a=i.element.closest(".ion-page");v.getPlatform()==="ios"&&a&&(a.addEventListener("ionViewWillEnter",()=>{setTimeout(()=>{h()},100)}),a.addEventListener("ionViewDidEnter",()=>{setTimeout(()=>{h()},100)}));const o={width:r.width,height:r.height,isHidden:!1};i.resizeObserver=new ResizeObserver(()=>{if(i.element!=null){const m=i.element.getBoundingClientRect(),L=m.width===0&&m.height===0;L||(o.isHidden?v.getPlatform()==="ios"&&!a&&h():(o.width!==m.width||o.height!==m.height)&&f()),o.width=m.width,o.height=m.height,o.isHidden=L}}),i.resizeObserver.observe(i.element)}if(await new Promise((c,h)=>{setTimeout(async()=>{try{await n.create(e),c(void 0)}catch(f){h(f)}},200)}),t){const c=await n.addListener("onMapReady",h=>{h.mapId==i.id&&(t(h),c.remove())})}return i}static async getElementBounds(e){return new Promise(t=>{let i=e.getBoundingClientRect();if(i.width==0){let r=0;const c=setInterval(function(){i.width==0&&r<30?(i=e.getBoundingClientRect(),r++):(r==30&&console.warn("Map size could not be determined"),clearInterval(c),t(i))},100)}else t(i)})}async enableTouch(){return n.enableTouch({id:this.id})}async disableTouch(){return n.disableTouch({id:this.id})}async enableClustering(e){return n.enableClustering({id:this.id,minClusterSize:e})}async disableClustering(){return n.disableClustering({id:this.id})}async addMarker(e){return(await n.addMarker({id:this.id,marker:e})).id}async addMarkers(e){return(await n.addMarkers({id:this.id,markers:e})).ids}async removeMarker(e){return n.removeMarker({id:this.id,markerId:e})}async removeMarkers(e){return n.removeMarkers({id:this.id,markerIds:e})}async addPolygons(e){return(await n.addPolygons({id:this.id,polygons:e})).ids}async addPolylines(e){return(await n.addPolylines({id:this.id,polylines:e})).ids}async removePolygons(e){return n.removePolygons({id:this.id,polygonIds:e})}async addCircles(e){return(await n.addCircles({id:this.id,circles:e})).ids}async removeCircles(e){return n.removeCircles({id:this.id,circleIds:e})}async removePolylines(e){return n.removePolylines({id:this.id,polylineIds:e})}async destroy(){var e;return v.getPlatform()=="android"&&this.disableScrolling(),v.isNativePlatform()&&((e=this.resizeObserver)===null||e===void 0||e.disconnect()),this.removeAllMapListeners(),n.destroy({id:this.id})}async setCamera(e){return n.setCamera({id:this.id,config:e})}async getMapType(){const{type:e}=await n.getMapType({id:this.id});return P[e]}async setMapType(e){return n.setMapType({id:this.id,mapType:e})}async enableIndoorMaps(e){return n.enableIndoorMaps({id:this.id,enabled:e})}async enableTrafficLayer(e){return n.enableTrafficLayer({id:this.id,enabled:e})}async enableAccessibilityElements(e){return n.enableAccessibilityElements({id:this.id,enabled:e})}async enableCurrentLocation(e){return n.enableCurrentLocation({id:this.id,enabled:e})}async setPadding(e){return n.setPadding({id:this.id,padding:e})}async getMapBounds(){return new q(await n.getMapBounds({id:this.id}))}async fitBounds(e,t){return n.fitBounds({id:this.id,bounds:e,padding:t})}initScrolling(){const e=document.getElementsByTagName("ion-content");for(let t=0;t<e.length;t++)e[t].scrollEvents=!0;window.addEventListener("ionScroll",this.handleScrollEvent),window.addEventListener("scroll",this.handleScrollEvent),window.addEventListener("resize",this.handleScrollEvent),screen.orientation?screen.orientation.addEventListener("change",()=>{setTimeout(this.updateMapBounds,500)}):window.addEventListener("orientationchange",()=>{setTimeout(this.updateMapBounds,500)})}disableScrolling(){window.removeEventListener("ionScroll",this.handleScrollEvent),window.removeEventListener("scroll",this.handleScrollEvent),window.removeEventListener("resize",this.handleScrollEvent),screen.orientation?screen.orientation.removeEventListener("change",()=>{setTimeout(this.updateMapBounds,1e3)}):window.removeEventListener("orientationchange",()=>{setTimeout(this.updateMapBounds,1e3)})}updateMapBounds(){if(this.element){const e=this.element.getBoundingClientRect();n.onScroll({id:this.id,mapBounds:{x:e.x,y:e.y,width:e.width,height:e.height}})}}async setOnCameraIdleListener(e){this.onCameraIdleListener&&this.onCameraIdleListener.remove(),e?this.onCameraIdleListener=await n.addListener("onCameraIdle",this.generateCallback(e)):this.onCameraIdleListener=void 0}async setOnBoundsChangedListener(e){this.onBoundsChangedListener&&this.onBoundsChangedListener.remove(),e?this.onBoundsChangedListener=await n.addListener("onBoundsChanged",this.generateCallback(e)):this.onBoundsChangedListener=void 0}async setOnCameraMoveStartedListener(e){this.onCameraMoveStartedListener&&this.onCameraMoveStartedListener.remove(),e?this.onCameraMoveStartedListener=await n.addListener("onCameraMoveStarted",this.generateCallback(e)):this.onCameraMoveStartedListener=void 0}async setOnClusterClickListener(e){this.onClusterClickListener&&this.onClusterClickListener.remove(),e?this.onClusterClickListener=await n.addListener("onClusterClick",this.generateCallback(e)):this.onClusterClickListener=void 0}async setOnClusterInfoWindowClickListener(e){this.onClusterInfoWindowClickListener&&this.onClusterInfoWindowClickListener.remove(),e?this.onClusterInfoWindowClickListener=await n.addListener("onClusterInfoWindowClick",this.generateCallback(e)):this.onClusterInfoWindowClickListener=void 0}async setOnInfoWindowClickListener(e){this.onInfoWindowClickListener&&this.onInfoWindowClickListener.remove(),e?this.onInfoWindowClickListener=await n.addListener("onInfoWindowClick",this.generateCallback(e)):this.onInfoWindowClickListener=void 0}async setOnMapClickListener(e){this.onMapClickListener&&this.onMapClickListener.remove(),e?this.onMapClickListener=await n.addListener("onMapClick",this.generateCallback(e)):this.onMapClickListener=void 0}async setOnPolygonClickListener(e){this.onPolygonClickListener&&this.onPolygonClickListener.remove(),e?this.onPolygonClickListener=await n.addListener("onPolygonClick",this.generateCallback(e)):this.onPolygonClickListener=void 0}async setOnCircleClickListener(e){this.onCircleClickListener&&this.onCircleClickListener.remove(),e?this.onCircleClickListener=await n.addListener("onCircleClick",this.generateCallback(e)):this.onCircleClickListener=void 0}async setOnMarkerClickListener(e){this.onMarkerClickListener&&this.onMarkerClickListener.remove(),e?this.onMarkerClickListener=await n.addListener("onMarkerClick",this.generateCallback(e)):this.onMarkerClickListener=void 0}async setOnPolylineClickListener(e){this.onPolylineClickListener&&this.onPolylineClickListener.remove(),e?this.onPolylineClickListener=await n.addListener("onPolylineClick",this.generateCallback(e)):this.onPolylineClickListener=void 0}async setOnMarkerDragStartListener(e){this.onMarkerDragStartListener&&this.onMarkerDragStartListener.remove(),e?this.onMarkerDragStartListener=await n.addListener("onMarkerDragStart",this.generateCallback(e)):this.onMarkerDragStartListener=void 0}async setOnMarkerDragListener(e){this.onMarkerDragListener&&this.onMarkerDragListener.remove(),e?this.onMarkerDragListener=await n.addListener("onMarkerDrag",this.generateCallback(e)):this.onMarkerDragListener=void 0}async setOnMarkerDragEndListener(e){this.onMarkerDragEndListener&&this.onMarkerDragEndListener.remove(),e?this.onMarkerDragEndListener=await n.addListener("onMarkerDragEnd",this.generateCallback(e)):this.onMarkerDragEndListener=void 0}async setOnMyLocationButtonClickListener(e){this.onMyLocationButtonClickListener&&this.onMyLocationButtonClickListener.remove(),e?this.onMyLocationButtonClickListener=await n.addListener("onMyLocationButtonClick",this.generateCallback(e)):this.onMyLocationButtonClickListener=void 0}async setOnMyLocationClickListener(e){this.onMyLocationClickListener&&this.onMyLocationClickListener.remove(),e?this.onMyLocationClickListener=await n.addListener("onMyLocationClick",this.generateCallback(e)):this.onMyLocationClickListener=void 0}async removeAllMapListeners(){this.onBoundsChangedListener&&(this.onBoundsChangedListener.remove(),this.onBoundsChangedListener=void 0),this.onCameraIdleListener&&(this.onCameraIdleListener.remove(),this.onCameraIdleListener=void 0),this.onCameraMoveStartedListener&&(this.onCameraMoveStartedListener.remove(),this.onCameraMoveStartedListener=void 0),this.onClusterClickListener&&(this.onClusterClickListener.remove(),this.onClusterClickListener=void 0),this.onClusterInfoWindowClickListener&&(this.onClusterInfoWindowClickListener.remove(),this.onClusterInfoWindowClickListener=void 0),this.onInfoWindowClickListener&&(this.onInfoWindowClickListener.remove(),this.onInfoWindowClickListener=void 0),this.onMapClickListener&&(this.onMapClickListener.remove(),this.onMapClickListener=void 0),this.onPolylineClickListener&&(this.onPolylineClickListener.remove(),this.onPolylineClickListener=void 0),this.onMarkerClickListener&&(this.onMarkerClickListener.remove(),this.onMarkerClickListener=void 0),this.onPolygonClickListener&&(this.onPolygonClickListener.remove(),this.onPolygonClickListener=void 0),this.onCircleClickListener&&(this.onCircleClickListener.remove(),this.onCircleClickListener=void 0),this.onMarkerDragStartListener&&(this.onMarkerDragStartListener.remove(),this.onMarkerDragStartListener=void 0),this.onMarkerDragListener&&(this.onMarkerDragListener.remove(),this.onMarkerDragListener=void 0),this.onMarkerDragEndListener&&(this.onMarkerDragEndListener.remove(),this.onMarkerDragEndListener=void 0),this.onMyLocationButtonClickListener&&(this.onMyLocationButtonClickListener.remove(),this.onMyLocationButtonClickListener=void 0),this.onMyLocationClickListener&&(this.onMyLocationClickListener.remove(),this.onMyLocationClickListener=void 0)}generateCallback(e){const t=this.id;return i=>{i.mapId==t&&e(i)}}}const J=E({__name:"GoogleMap",emits:["onMarkerClicked","onMapClicked"],setup(u,{emit:e}){const t=p(),i=p();let r;const c=p(),h=e;S(async()=>{console.log("mounted ",t.value),await N(),await a()}),H(()=>{console.log("onunmounted"),r.removeMarkers(i==null?void 0:i.value)});const f=async o=>{i!=null&&i.value&&o.removeMarkers(i==null?void 0:i.value);const m="/public/home-sharp.svg",g=(await w.getAllCases()).map(I=>({coordinate:{lat:I.lat,lng:I.long},title:I.title,iconUrl:""}));g.push({coordinate:{lat:c.value.latitude,lng:c.value.longitude},title:"Mein Standort",iconUrl:m}),console.log(g[2]),i.value=await o.addMarkers(g)};async function a(){t.value&&(c.value=await w.currentLocation(),r=await _.create({id:"map-id",element:t.value,apiKey:{BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1,LEGACY:!1}.VITE_APP_YOUR_API_KEY_HERE,config:{center:{lat:c.value.latitude,lng:c.value.longitude},zoom:15}}),r.enableCurrentLocation(!0),f(r),r.setOnMarkerClickListener(o=>{h("onMarkerClicked",o)}),r.setOnMapClickListener(()=>{h("onMapClicked")}))}return(o,m)=>{const L=y("capacitor-google-map");return B(),O("div",null,[s(L,{ref_key:"mapRef",ref:t,style:{display:"inline-block",width:"100vw",height:"86vh"}},null,512)])}}}),D=E({__name:"CrimeProfile",props:{markerData:{}},emits:["onDismiss"],setup(u,{emit:e}){const t=u;async function i(){await W.dismiss()}return(r,c)=>{const h=y("ion-icon"),f=y("ion-button"),a=y("ion-buttons"),o=y("ion-toolbar");return B(),O(V,null,[s(d(R),null,{default:l(()=>[s(o,null,{default:l(()=>[s(d(T),null,{default:l(()=>[C(M(t.markerData[0].title),1)]),_:1}),s(a,{slot:"end"},{default:l(()=>[s(f,{onClick:c[0]||(c[0]=m=>i())},{default:l(()=>[s(h,{name:"close-outline"})]),_:1})]),_:1})]),_:1})]),_:1}),s(d(x),{class:"ion-padding"},{default:l(()=>[b("p",null,M(t.markerData[0].title),1),b("p",null,M(t.markerData[0].summary),1),b("p",null,M(t.markerData[0].status),1)]),_:1})],64)}}}),Q=E({__name:"CrimeMapView",setup(u){const e=p(!1);let t=[];S(async()=>{t=await w.getAllCases();const a=await w.currentLocation();t.push({id:"0",title:"Mein Standort",summary:"Mein aktueller Standort",status:"",created_by:"",created_at:new Date().getDate().toString(),lat:a.latitude,long:a.longitude})});const i=async a=>{console.log("marker to pass"),console.log(a),(await W.create({component:D,componentProps:{markerData:a},initialBreakpoint:.8,breakpoints:[0,.8],backdropBreakpoint:0,showBackdrop:!1,backdropDismiss:!0})).present()},r=()=>{console.log("mapClicked")},c=a=>t.filter(o=>o.long===a.long&&o.lat===a.lat),h=a=>{if(!v.isNativePlatform()){const o=c({lat:a.latitude,long:a.longitude});i(o)}},f=a=>{console.log(a.detail.value)};return(a,o)=>(B(),F(d(Y),null,{default:l(()=>[s(d(R),{translucent:!0},{default:l(()=>[s(d(U),null,{default:l(()=>[s(d(T),null,{default:l(()=>[C("Crime Map")]),_:1})]),_:1})]),_:1}),s(d(x),null,{default:l(()=>[s(d(G),null,{default:l(()=>[s(d($),{label:"Radius",placeholder:"0km","aria-label":"Range",onIonChange:f},{default:l(()=>[s(d(k),{value:"5"},{default:l(()=>[C("5 km")]),_:1}),s(d(k),{value:"10"},{default:l(()=>[C("10 km")]),_:1}),s(d(k),{value:"20"},{default:l(()=>[C("20 km")]),_:1}),s(d(k),{value:"50"},{default:l(()=>[C("50 km")]),_:1}),s(d(k),{value:"100"},{default:l(()=>[C("100 km")]),_:1}),s(d(k),{value:"200"},{default:l(()=>[C("200 km")]),_:1}),s(d(k),{value:"500"},{default:l(()=>[C("500 km")]),_:1}),s(d(k),{value:"1000"},{default:l(()=>[C("1000 km")]),_:1}),s(d(k),{value:"10000"},{default:l(()=>[C("10000 km")]),_:1})]),_:1})]),_:1}),s(J,{onOnMapClicked:r,onOnMarkerClicked:h}),s(d(j),{"is-open":e.value,size:"cover",onDidDismiss:o[0]||(o[0]=m=>e.value=!1)},{default:l(()=>[s(D,{markerData:d(t)},null,8,["markerData"])]),_:1},8,["is-open"])]),_:1})]),_:1}))}}),Z=Object.freeze(Object.defineProperty({__proto__:null,default:Q},Symbol.toStringTag,{value:"Module"}));export{Z as C,q as L,P as M};
