System.register(["./index-legacy-CWgI5eaJ.js"],(function(e,t){"use strict";var i,n,a,r,s,o,l,d,c,h,u,m,k,C,v,L,g,y,M,p,w,f,b,E,P,I,B,D,S,_;return{setters:[e=>{i=e.r,n=e._,a=e.C,r=e.d,s=e.a,o=e.o,l=e.n,d=e.b,c=e.m,h=e.c,u=e.e,m=e.f,k=e.g,C=e.w,v=e.u,L=e.I,g=e.h,y=e.t,M=e.i,p=e.j,w=e.k,f=e.F,b=e.l,E=e.p,P=e.q,I=e.s,B=e.v,D=e.x,S=e.y,_=e.z}],execute:function(){const O=i("CapacitorGoogleMaps",{web:()=>n((()=>t.import("./web-legacy-DgJauuCe.js")),void 0).then((e=>new e.CapacitorGoogleMapsWeb))});O.addListener("isMapInFocus",(e=>{var t;const i=e.x,n=e.y,a=document.elementFromPoint(i,n),r=(null===(t=null==a?void 0:a.dataset)||void 0===t?void 0:t.internalId)===e.mapId;O.dispatchMapEvent({id:e.mapId,focus:r})}));class T{constructor(e){this.southwest=e.southwest,this.center=e.center,this.northeast=e.northeast}async contains(e){return(await O.mapBoundsContains({bounds:this,point:e})).contains}async extend(e){const t=await O.mapBoundsExtend({bounds:this,point:e});return this.southwest=t.bounds.southwest,this.center=t.bounds.center,this.northeast=t.bounds.northeast,this}}var R;e("L",T),e("M",R),function(e){e.Normal="Normal",e.Hybrid="Hybrid",e.Satellite="Satellite",e.Terrain="Terrain",e.None="None"}(R||e("M",R={}));class W extends HTMLElement{constructor(){super()}connectedCallback(){if(this.innerHTML="","ios"==a.getPlatform()){this.style.overflow="scroll",this.style["-webkit-overflow-scrolling"]="touch";const e=document.createElement("div");e.style.height="200%",this.appendChild(e)}}}customElements.define("capacitor-google-map",W);class x{constructor(e){this.element=null,this.resizeObserver=null,this.handleScrollEvent=()=>this.updateMapBounds(),this.id=e}static async create(e,t){const i=new x(e.id);if(!e.element)throw new Error("container element is required");void 0===e.config.androidLiteMode&&(e.config.androidLiteMode=!1),i.element=e.element,i.element.dataset.internalId=e.id;const n=await x.getElementBounds(e.element);if(e.config.width=n.width,e.config.height=n.height,e.config.x=n.x,e.config.y=n.y,e.config.devicePixelRatio=window.devicePixelRatio,"android"==a.getPlatform()&&i.initScrolling(),a.isNativePlatform()){e.element={};const t=()=>{var e,t;const n=null!==(t=null===(e=i.element)||void 0===e?void 0:e.getBoundingClientRect())&&void 0!==t?t:{};return{x:n.x,y:n.y,width:n.width,height:n.height}},r=()=>{O.onDisplay({id:i.id,mapBounds:t()})},s=()=>{O.onResize({id:i.id,mapBounds:t()})},o=i.element.closest(".ion-page");"ios"===a.getPlatform()&&o&&(o.addEventListener("ionViewWillEnter",(()=>{setTimeout((()=>{r()}),100)})),o.addEventListener("ionViewDidEnter",(()=>{setTimeout((()=>{r()}),100)})));const l={width:n.width,height:n.height,isHidden:!1};i.resizeObserver=new ResizeObserver((()=>{if(null!=i.element){const e=i.element.getBoundingClientRect(),t=0===e.width&&0===e.height;t||(l.isHidden?"ios"!==a.getPlatform()||o||r():l.width===e.width&&l.height===e.height||s()),l.width=e.width,l.height=e.height,l.isHidden=t}})),i.resizeObserver.observe(i.element)}if(await new Promise(((t,i)=>{setTimeout((async()=>{try{await O.create(e),t(void 0)}catch(n){i(n)}}),200)})),t){const e=await O.addListener("onMapReady",(n=>{n.mapId==i.id&&(t(n),e.remove())}))}return i}static async getElementBounds(e){return new Promise((t=>{let i=e.getBoundingClientRect();if(0==i.width){let n=0;const a=setInterval((function(){0==i.width&&n<30?(i=e.getBoundingClientRect(),n++):(30==n&&console.warn("Map size could not be determined"),clearInterval(a),t(i))}),100)}else t(i)}))}async enableTouch(){return O.enableTouch({id:this.id})}async disableTouch(){return O.disableTouch({id:this.id})}async enableClustering(e){return O.enableClustering({id:this.id,minClusterSize:e})}async disableClustering(){return O.disableClustering({id:this.id})}async addMarker(e){return(await O.addMarker({id:this.id,marker:e})).id}async addMarkers(e){return(await O.addMarkers({id:this.id,markers:e})).ids}async removeMarker(e){return O.removeMarker({id:this.id,markerId:e})}async removeMarkers(e){return O.removeMarkers({id:this.id,markerIds:e})}async addPolygons(e){return(await O.addPolygons({id:this.id,polygons:e})).ids}async addPolylines(e){return(await O.addPolylines({id:this.id,polylines:e})).ids}async removePolygons(e){return O.removePolygons({id:this.id,polygonIds:e})}async addCircles(e){return(await O.addCircles({id:this.id,circles:e})).ids}async removeCircles(e){return O.removeCircles({id:this.id,circleIds:e})}async removePolylines(e){return O.removePolylines({id:this.id,polylineIds:e})}async destroy(){var e;return"android"==a.getPlatform()&&this.disableScrolling(),a.isNativePlatform()&&(null===(e=this.resizeObserver)||void 0===e||e.disconnect()),this.removeAllMapListeners(),O.destroy({id:this.id})}async setCamera(e){return O.setCamera({id:this.id,config:e})}async getMapType(){const{type:e}=await O.getMapType({id:this.id});return R[e]}async setMapType(e){return O.setMapType({id:this.id,mapType:e})}async enableIndoorMaps(e){return O.enableIndoorMaps({id:this.id,enabled:e})}async enableTrafficLayer(e){return O.enableTrafficLayer({id:this.id,enabled:e})}async enableAccessibilityElements(e){return O.enableAccessibilityElements({id:this.id,enabled:e})}async enableCurrentLocation(e){return O.enableCurrentLocation({id:this.id,enabled:e})}async setPadding(e){return O.setPadding({id:this.id,padding:e})}async getMapBounds(){return new T(await O.getMapBounds({id:this.id}))}async fitBounds(e,t){return O.fitBounds({id:this.id,bounds:e,padding:t})}initScrolling(){const e=document.getElementsByTagName("ion-content");for(let t=0;t<e.length;t++)e[t].scrollEvents=!0;window.addEventListener("ionScroll",this.handleScrollEvent),window.addEventListener("scroll",this.handleScrollEvent),window.addEventListener("resize",this.handleScrollEvent),screen.orientation?screen.orientation.addEventListener("change",(()=>{setTimeout(this.updateMapBounds,500)})):window.addEventListener("orientationchange",(()=>{setTimeout(this.updateMapBounds,500)}))}disableScrolling(){window.removeEventListener("ionScroll",this.handleScrollEvent),window.removeEventListener("scroll",this.handleScrollEvent),window.removeEventListener("resize",this.handleScrollEvent),screen.orientation?screen.orientation.removeEventListener("change",(()=>{setTimeout(this.updateMapBounds,1e3)})):window.removeEventListener("orientationchange",(()=>{setTimeout(this.updateMapBounds,1e3)}))}updateMapBounds(){if(this.element){const e=this.element.getBoundingClientRect();O.onScroll({id:this.id,mapBounds:{x:e.x,y:e.y,width:e.width,height:e.height}})}}async setOnCameraIdleListener(e){this.onCameraIdleListener&&this.onCameraIdleListener.remove(),this.onCameraIdleListener=e?await O.addListener("onCameraIdle",this.generateCallback(e)):void 0}async setOnBoundsChangedListener(e){this.onBoundsChangedListener&&this.onBoundsChangedListener.remove(),this.onBoundsChangedListener=e?await O.addListener("onBoundsChanged",this.generateCallback(e)):void 0}async setOnCameraMoveStartedListener(e){this.onCameraMoveStartedListener&&this.onCameraMoveStartedListener.remove(),this.onCameraMoveStartedListener=e?await O.addListener("onCameraMoveStarted",this.generateCallback(e)):void 0}async setOnClusterClickListener(e){this.onClusterClickListener&&this.onClusterClickListener.remove(),this.onClusterClickListener=e?await O.addListener("onClusterClick",this.generateCallback(e)):void 0}async setOnClusterInfoWindowClickListener(e){this.onClusterInfoWindowClickListener&&this.onClusterInfoWindowClickListener.remove(),this.onClusterInfoWindowClickListener=e?await O.addListener("onClusterInfoWindowClick",this.generateCallback(e)):void 0}async setOnInfoWindowClickListener(e){this.onInfoWindowClickListener&&this.onInfoWindowClickListener.remove(),this.onInfoWindowClickListener=e?await O.addListener("onInfoWindowClick",this.generateCallback(e)):void 0}async setOnMapClickListener(e){this.onMapClickListener&&this.onMapClickListener.remove(),this.onMapClickListener=e?await O.addListener("onMapClick",this.generateCallback(e)):void 0}async setOnPolygonClickListener(e){this.onPolygonClickListener&&this.onPolygonClickListener.remove(),this.onPolygonClickListener=e?await O.addListener("onPolygonClick",this.generateCallback(e)):void 0}async setOnCircleClickListener(e){this.onCircleClickListener&&this.onCircleClickListener.remove(),this.onCircleClickListener=e?await O.addListener("onCircleClick",this.generateCallback(e)):void 0}async setOnMarkerClickListener(e){this.onMarkerClickListener&&this.onMarkerClickListener.remove(),this.onMarkerClickListener=e?await O.addListener("onMarkerClick",this.generateCallback(e)):void 0}async setOnPolylineClickListener(e){this.onPolylineClickListener&&this.onPolylineClickListener.remove(),this.onPolylineClickListener=e?await O.addListener("onPolylineClick",this.generateCallback(e)):void 0}async setOnMarkerDragStartListener(e){this.onMarkerDragStartListener&&this.onMarkerDragStartListener.remove(),this.onMarkerDragStartListener=e?await O.addListener("onMarkerDragStart",this.generateCallback(e)):void 0}async setOnMarkerDragListener(e){this.onMarkerDragListener&&this.onMarkerDragListener.remove(),this.onMarkerDragListener=e?await O.addListener("onMarkerDrag",this.generateCallback(e)):void 0}async setOnMarkerDragEndListener(e){this.onMarkerDragEndListener&&this.onMarkerDragEndListener.remove(),this.onMarkerDragEndListener=e?await O.addListener("onMarkerDragEnd",this.generateCallback(e)):void 0}async setOnMyLocationButtonClickListener(e){this.onMyLocationButtonClickListener&&this.onMyLocationButtonClickListener.remove(),this.onMyLocationButtonClickListener=e?await O.addListener("onMyLocationButtonClick",this.generateCallback(e)):void 0}async setOnMyLocationClickListener(e){this.onMyLocationClickListener&&this.onMyLocationClickListener.remove(),this.onMyLocationClickListener=e?await O.addListener("onMyLocationClick",this.generateCallback(e)):void 0}async removeAllMapListeners(){this.onBoundsChangedListener&&(this.onBoundsChangedListener.remove(),this.onBoundsChangedListener=void 0),this.onCameraIdleListener&&(this.onCameraIdleListener.remove(),this.onCameraIdleListener=void 0),this.onCameraMoveStartedListener&&(this.onCameraMoveStartedListener.remove(),this.onCameraMoveStartedListener=void 0),this.onClusterClickListener&&(this.onClusterClickListener.remove(),this.onClusterClickListener=void 0),this.onClusterInfoWindowClickListener&&(this.onClusterInfoWindowClickListener.remove(),this.onClusterInfoWindowClickListener=void 0),this.onInfoWindowClickListener&&(this.onInfoWindowClickListener.remove(),this.onInfoWindowClickListener=void 0),this.onMapClickListener&&(this.onMapClickListener.remove(),this.onMapClickListener=void 0),this.onPolylineClickListener&&(this.onPolylineClickListener.remove(),this.onPolylineClickListener=void 0),this.onMarkerClickListener&&(this.onMarkerClickListener.remove(),this.onMarkerClickListener=void 0),this.onPolygonClickListener&&(this.onPolygonClickListener.remove(),this.onPolygonClickListener=void 0),this.onCircleClickListener&&(this.onCircleClickListener.remove(),this.onCircleClickListener=void 0),this.onMarkerDragStartListener&&(this.onMarkerDragStartListener.remove(),this.onMarkerDragStartListener=void 0),this.onMarkerDragListener&&(this.onMarkerDragListener.remove(),this.onMarkerDragListener=void 0),this.onMarkerDragEndListener&&(this.onMarkerDragEndListener.remove(),this.onMarkerDragEndListener=void 0),this.onMyLocationButtonClickListener&&(this.onMyLocationButtonClickListener.remove(),this.onMyLocationButtonClickListener=void 0),this.onMyLocationClickListener&&(this.onMyLocationClickListener.remove(),this.onMyLocationClickListener=void 0)}generateCallback(e){const t=this.id;return i=>{i.mapId==t&&e(i)}}}const z=r({__name:"GoogleMap",emits:["onMarkerClicked","onMapClicked"],setup(e,{emit:t}){const i=s(),n=s();let a;const r=s(),C=t;return o((async()=>{console.log("mounted ",i.value),await l(),await async function(){i.value&&(r.value=await c.currentLocation(),a=await x.create({id:"map-id",element:i.value,apiKey:{BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1,LEGACY:!0}.VITE_APP_YOUR_API_KEY_HERE,config:{center:{lat:r.value.latitude,lng:r.value.longitude},zoom:15}}),a.enableCurrentLocation(!0),(async e=>{(null==n?void 0:n.value)&&e.removeMarkers(null==n?void 0:n.value);const t="/public/home-sharp.svg",i=(await c.getAllCases()).map((e=>({coordinate:{lat:e.lat,lng:e.long},title:e.title,iconUrl:""})));i.push({coordinate:{lat:r.value.latitude,lng:r.value.longitude},title:"Mein Standort",iconUrl:t}),console.log(i[2]),n.value=await e.addMarkers(i)})(a),a.setOnMarkerClickListener((e=>{C("onMarkerClicked",e)})),a.setOnMapClickListener((()=>{C("onMapClicked")})))}()})),d((()=>{console.log("onunmounted"),a.removeMarkers(null==n?void 0:n.value)})),(e,t)=>{const n=h("capacitor-google-map");return u(),m("div",null,[k(n,{ref_key:"mapRef",ref:i,style:{display:"inline-block",width:"100vw",height:"86vh"}},null,512)])}}}),A=r({__name:"CrimeProfile",props:{markerData:{}},emits:["onDismiss"],setup(e,{emit:t}){const i=e;return(e,t)=>{const n=h("ion-icon"),a=h("ion-button"),r=h("ion-buttons"),s=h("ion-toolbar");return u(),m(f,null,[k(v(M),null,{default:C((()=>[k(s,null,{default:C((()=>[k(v(L),null,{default:C((()=>[g(y(i.markerData[0].title),1)])),_:1}),k(r,{slot:"end"},{default:C((()=>[k(a,{onClick:t[0]||(t[0]=e=>async function(){await b.dismiss()}())},{default:C((()=>[k(n,{name:"close-outline"})])),_:1})])),_:1})])),_:1})])),_:1}),k(v(w),{class:"ion-padding"},{default:C((()=>[p("p",null,y(i.markerData[0].title),1),p("p",null,y(i.markerData[0].summary),1),p("p",null,y(i.markerData[0].status),1)])),_:1})],64)}}}),H=r({__name:"CrimeMapView",setup(e){const t=s(!1);let i=[];o((async()=>{i=await c.getAllCases();const e=await c.currentLocation();i.push({id:"0",title:"Mein Standort",summary:"Mein aktueller Standort",status:"",created_by:"",created_at:(new Date).getDate().toString(),lat:e.latitude,long:e.longitude})}));const n=()=>{console.log("mapClicked")},r=e=>{var t;a.isNativePlatform()||(async e=>{console.log("marker to pass"),console.log(e),(await b.create({component:A,componentProps:{markerData:e},initialBreakpoint:.8,breakpoints:[0,.8],backdropBreakpoint:0,showBackdrop:!1,backdropDismiss:!0})).present()})((t={lat:e.latitude,long:e.longitude},i.filter((e=>e.long===t.long&&e.lat===t.lat))))},l=e=>{console.log(e.detail.value)};return(e,a)=>(u(),E(v(_),null,{default:C((()=>[k(v(M),{translucent:!0},{default:C((()=>[k(v(P),null,{default:C((()=>[k(v(L),null,{default:C((()=>[g("Crime Map")])),_:1})])),_:1})])),_:1}),k(v(w),null,{default:C((()=>[k(v(I),null,{default:C((()=>[k(v(B),{label:"Radius",placeholder:"0km","aria-label":"Range",onIonChange:l},{default:C((()=>[k(v(D),{value:"5"},{default:C((()=>[g("5 km")])),_:1}),k(v(D),{value:"10"},{default:C((()=>[g("10 km")])),_:1}),k(v(D),{value:"20"},{default:C((()=>[g("20 km")])),_:1}),k(v(D),{value:"50"},{default:C((()=>[g("50 km")])),_:1}),k(v(D),{value:"100"},{default:C((()=>[g("100 km")])),_:1}),k(v(D),{value:"200"},{default:C((()=>[g("200 km")])),_:1}),k(v(D),{value:"500"},{default:C((()=>[g("500 km")])),_:1}),k(v(D),{value:"1000"},{default:C((()=>[g("1000 km")])),_:1}),k(v(D),{value:"10000"},{default:C((()=>[g("10000 km")])),_:1})])),_:1})])),_:1}),k(z,{onOnMapClicked:n,onOnMarkerClicked:r}),k(v(S),{"is-open":t.value,size:"cover",onDidDismiss:a[0]||(a[0]=e=>t.value=!1)},{default:C((()=>[k(A,{markerData:v(i)},null,8,["markerData"])])),_:1},8,["is-open"])])),_:1})])),_:1}))}}),N=Object.freeze(Object.defineProperty({__proto__:null,default:H},Symbol.toStringTag,{value:"Module"}));e("C",N)}}}));
